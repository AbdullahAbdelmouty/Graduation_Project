#include <ESP8266WiFi.h>
#include <ESP8266HTTPClient.h>

const char* ssid = "shady";
const char* password = "0111856585142awaled";
const char* serverAddress = "http://192.168.1.10"; // e.g., "http://192.168.1.100" or "http://example.com"
String payload = "www.google.com";
void setup() {
  Serial.begin(115200);

  // Connect to Wi-Fi
  WiFi.begin(ssid, password);
  while (WiFi.status() != WL_CONNECTED) {
    delay(1000);
    Serial.println("Connecting to WiFi...");
  }
  Serial.println("Connected to WiFi");

  // Send string to server
}

void loop() {
  // Your code here
  sendStringToServer(payload);
  delay(3000);
} 

void sendStringToServer(String data) {
  WiFiClient client;

  HTTPClient http;
  // Specify server address and endpoint
  String url = String(serverAddress) + "/myapp/endpoint/"; // Corrected concatenation using String object

  Serial.print("Sending request to: ");
  Serial.println(url);

  http.begin(client, url); // Use begin() with WiFiClient object and URL

  // Add headers if needed
  http.addHeader("Content-Type", "application/x-www-form-urlencoded");

  // Send POST request with data
  int httpResponseCode = http.POST("string=" + data);

  // Check for errors
  if (httpResponseCode > 0) {
    Serial.print("HTTP Response code: ");
    Serial.println(httpResponseCode);
    String response = http.getString();
    Serial.println(response);
  } else {
    Serial.print("Error code: ");
    Serial.println(httpResponseCode);
    Serial.print("Error detail: ");
    Serial.println(http.errorToString(httpResponseCode));
  }

  http.end();
}
String getStringFromServer() {
  WiFiClient client;

  HTTPClient http;
  // Specify server address and endpoint
  String url = String(serverAddress) + "/myapp/endpoint/"; // Corrected concatenation using String object

  Serial.print("Sending request to: ");
  Serial.println(url);

  http.begin(client, url); // Use begin() with WiFiClient object and URL

  // Send GET request
  int httpResponseCode = http.GET();

  // Check for successful response
  if (httpResponseCode == HTTP_CODE_OK) {
    String response = http.getString();
    Serial.print("Received response: ");
    Serial.println(response);
    return response;
  } else {
    Serial.print("Error code: ");
    Serial.println(httpResponseCode);
    Serial.print("Error detail: ");
    Serial.println(http.errorToString(httpResponseCode));
    return ""; // Return empty string on error
  }

  http.end();
}